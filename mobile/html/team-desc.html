<!--资讯详情-->
<html>
<header>
    <meta charset="utf-8" >
    <meta http-equiv="content-type" content="text/html" >
    <meta   HTTP-EQUIV="Pragma"   CONTENT="no-cache">
    <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width"/>
    <meta name="format-detection" content="telephone=no" />
    <meta name="app-mobile-web-app-capable"  content="yes" />
    <link rel="stylesheet" href="../css/common.css" />
    <script src="../js/index.aio.js"></script>
    <script src="../js/rem.js"></script>
    <!-- 项目依次引入 STR -->
    <script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/axios.util.js"></script>
    <script src="../custom-js/constant.js"></script>
    <script src="../custom-js/common.local.js"></script>
    <!-- 项目依次引入 END -->
</header>
<body>
<div id="content">

</div>
<script type="text/html" id="template">
    <ul class="detail-content">
        <li>
            <img src="<%:u=obj.teamLogo%>" alt="">
        </li>
        <li>
            <p class="detail-title"><%=obj.teamName%></p>
            <div class="detail-sub-title">成立日期：<%=date_format(obj.foundingTime)%> <span>成员：<%=obj.serverPeoCnt%> 人</span></div>
        </li>
        <li class="desc">
            <%=obj.declaration%>
        </li>
        <li class="desc">
            <%if (obj.activities) {%>
            <p class="sub-title font400">团队服务记录</p>
            <hr class="green">
            <div class="scroll-detail">
                <div class="hidden-block"></div>
                <%for (var i = 0; i< obj.activities.length; i++){%>
                <div onclick="window.location.href='activity-detail.html?id=<%=obj.activities[i].id%>';">
                    <p><%=obj.activities[i].activityName%></p>
                    <p>总服务时长:<%=obj.activities[i].activityActualTime%>小时</p>
                    <p><%=date_format(obj.activities[i].createDatetime)%></p>
                </div>
                <%}%>
            </div>
            <div class="split-line"></div>
            <%}%>
            <%if (obj.training) {%>
            <p class="sub-title font400">团队组织培训记录</p>
            <hr class="blue">
            <div class="scroll-detail">
                <div class="hidden-block"></div>
                <%for (var i =0; i< obj.training.length; i++) {%>
                <div onclick="window.location.href='train-detail.html?id=<%=obj.training[i].id%>';">
                    <p><%=obj.training[i].trainingName%></p>
                    <p>总服务时长:<%=obj.training[i].trainingSumHour%>小时</p>
                    <p><%=date_format(obj.training[i].createDatetime)%></p>
                </div>
                <%}%>
            </div>
            <%}%>
        </li>
    </ul>
</script>
</body>

<script>
    function render_page(data) {
        template.registerFunction('date_format', date_format);// 通过方法注册提高运算速度
        let template1 = document.getElementById('template').innerHTML;
        document.getElementById('content').innerHTML = template(template1,{obj:data});
    }

    ajax_get(api_base_url + '/vTeam/getTeamAllDetailById/' + url_variable('id'), null, function (data) {
        if (data.code !== '200') {
            alert(data.message);
            return;
        }
        render_page(data.data);
    });
</script>
</html>
